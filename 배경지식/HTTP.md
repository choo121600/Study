# HTTPS
애플 개발자 아카데미에 지원하며 내가 지원한 곳의 멘토분들이 어떤 분들이실까 조사해보면서 LEEO님의 블로그를 보게 되었다.  
블로그에 IOS개발 로드맵이 있었는데 기본 지식을 익히는 데 좋아 보였다.  
따라서 리이오님께서 오픈소스에 번역해주신 "만화로 보는 https 동작원리"를 통해 공부하게 되었다.  
조금 오타는 있었지만, 웹 개발 공부를 하며 기본을 익히지 않고 넘어간 부분이 있었는데 그를 재미있게 보완할 수 있었다.  
[LEEO님의 블로그](https://dev200ok.blogspot.com/2020/05/dev.html)  
[HOWHTTPS.WORKS](https://howhttps.works/ko/)

## HTTPS가 왜 필요할까?
1. 개인 정보 보호(암호화로 중간자 공격을 예방해줌)
2. 무결성(메세지가 목적지로 가는 도중 조작되지 않았음을 의미해준다.)
3. 식별(SSL 인증서를 통해 수신자에게 정확하게 연결해준다.)

## 암호화란
HTTPS는 웹에서 개인 정보 보호, 무결성 및 식별을 제공할 수 있는 방법이 필요한데 그를 암호화라고 한다.  

### 대칭 키 알고리즘
- 키가 하나
- 키를 비공개로 유지하는 것이 중요함
- 공유가 어려움
### 비대칭 키 알고리즘
- 키가 두 개(공개 키, 비공개 키)
- 공개 키로 잠구고 개인 키를 사용하여 읽을 수 있음
- 개인 정보 보호뿐만 아니라 식별에도 유용함


## 핸드 셰이크
브라우저와 서버 간 의 소통을 할 때,
1. 브라우저는 SSL/TLS 버전 및 암호화 알고리즘 목록(Cipher Suite)을 서버에 보낸다.
2. 브라우저에서 받은 SSL/TLS 버전 및 암호화 알고리즘을 서버의 선호도에 따라 선택하고 공개 키가 포함된 인증서로 회신한다.
3. 브라우저는 인증서가 합법적인지 확인하고 pre-master key를 생성하고 서버의 공개 키로 암호화한 후 서버에 전송한다. (이는 나중에 양쪽에서 고유 키를 생성 할 때 사용할 수 있다.)
4. 서버는 개인 키를 사용하여 pre-master key를 해독한다.
5. 브라우저와 서버는 비대칭 키를 사용하여 마스터키를 암호화함으로써 보호받는다.

## HTTPS, SSL 및 TLS
### HTTPS란 
- HTTP의 보안 버전이다.(HTTP는 브라우저 및 웹 서버가 정보를 교환하고 소통하기 위해 사용하는 프로토콜인데 해당 데이터 교환이 SSL/TLS로 암호화 되면 HTTPS라고 한다.)
### SSL
- SSL은 90년대 중반 넷스케이프에 의해서 생성되었으나 폐기된 프로토콜이다.
### TLS
- IETF에서 유지 및 관리하는 웹의 보안 암호화를 위한 새로운 프로토콜이다.

## 인증 기관(CA)
### 인증 기관의 목적
- 인증서 발급
- 인증서 소유자의 신원 확인
- 인증서가 유효하다는 증거 제공

### 인증서의 종류
- 도메인 확인
  - 인증서는 도메인 이름만 확인하고 다른 것은 확인하지 않는다.(대부분 이것을 필요로 함)
- 조직 확인
  - 인증서는 인증서 뒤에 있는 조직의 유효성 검증 및 수동 검증을 필요함
- 확장된 검증
  - 사업에 대한 철저한 검증이 필요함

유효한 모든 인증서에는 브라우저 표시줄에 보안 배지가 표시 된다. EV 인증서는 회사 이름도 표시해준다.

### 인증서는 어떻게 검증될까?
![image](https://user-images.githubusercontent.com/54111883/149521252-b0d0524a-cf42-4d99-a819-42c045aa4cb1.png)

마지막 인증서가 루트 인증서가 아니고, 다운로드 할 인증서가 더 이상 없는 경우 체인은 신뢰할 수 없다.

### 인증 기관을 사용하는 이유
- 자체 서명 인증서는 기관에서 생성한 것과 동일한 수준의 암호화를 제공하기 때문이다.
- 인증서 자체 서명에 대한 비용이 없다.
- 거의 모든 브라우저는 신뢰할 수 있는 기관이 인증서를 발급했는지 확인함.
- 자체 서명된 인증서는 테스트 및 인트라넷에서 유용할 수 있으나 공용 사이트에서는 사용하지 말아야한다.(위조의 위험)
